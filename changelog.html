

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ChangeLog &mdash; Photons 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Photons 0.1 documentation" href="index.html"/>
        <link rel="next" title="photons_app" href="photons_app/index.html"/>
        <link rel="prev" title="Known Issues" href="known_issues.html"/>
   
	<link rel="stylesheet" href="_static/css/styles.css" type="text/css"/>


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Photons
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="lifx_script.html">LIFX script</a></li>
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Making a Photons Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="library.html">Using Photons as a library</a></li>
<li class="toctree-l1"><a class="reference internal" href="venvstarter.html">Using Venvstarter</a></li>
<li class="toctree-l1"><a class="reference internal" href="script_mechanism.html">The Script Mechanism</a></li>
<li class="toctree-l1"><a class="reference internal" href="planner.html">Planner</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_file.html">Config file</a></li>
<li class="toctree-l1"><a class="reference internal" href="discovery.html">Device Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="finding_serials.html">Finding Serials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tile_animations.html">Tile Animations</a></li>
<li class="toctree-l1"><a class="reference internal" href="packets.html">Packets</a></li>
<li class="toctree-l1"><a class="reference internal" href="known_issues.html">Known Issues</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ChangeLog</a></li>
<li class="toctree-l1"><a class="reference internal" href="photons_app/index.html">photons_app</a></li>
<li class="toctree-l1"><a class="reference internal" href="binary_protocol.html">LIFX Binary protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="available_modules.html">Available Photons Modules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Photons</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ChangeLog</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/changelog.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changelog">
<span id="id1"></span><h1>ChangeLog<a class="headerlink" href="#changelog" title="Permalink to this headline">Â¶</a></h1>
<dl class="docutils">
<dt>0.23.0 - 12 October 2019</dt>
<dd><ul class="first last">
<li><p class="first">Added large_font and speed options to the tile_marquee animation which
allows a 16x16 font across two tile sets.</p>
</li>
<li><p class="first">Changed photons_control.multizone.find_multizone to yield
<code class="docutils literal"><span class="pre">(serial,</span> <span class="pre">capability)</span></code> instead of <code class="docutils literal"><span class="pre">(serial,</span> <span class="pre">has_extended_multizone)</span></code>.
You can get <code class="docutils literal"><span class="pre">has_extended_multizone</span></code> by saying <code class="docutils literal"><span class="pre">capability.has_extended_multizone</span></code></p>
</li>
<li><p class="first">Changed the Capability plan to yield <code class="docutils literal"><span class="pre">{&quot;product&quot;:</span> <span class="pre">&lt;Product&gt;,</span> <span class="pre">&quot;cap&quot;:</span> <span class="pre">&lt;capability&gt;}</span></code>
instead of also yielding a <code class="docutils literal"><span class="pre">has_extended_multizone</span></code> field. You may get this
by saying <code class="docutils literal"><span class="pre">info[&quot;cap&quot;].has_extended_multizone</span></code></p>
</li>
<li><p class="first">You should identify whether a product supports Tile messages by looking at
the <code class="docutils literal"><span class="pre">has_matrix</span></code> capability instead of <code class="docutils literal"><span class="pre">has_chain</span></code>. We may rename the
Tile messages to be Matrix messages in the future, but that change has yet
to be properly thought out. The <code class="docutils literal"><span class="pre">has_matrix</span></code> capability says there is a
2d array of LEDs on the device. The <code class="docutils literal"><span class="pre">has_chain</span></code> capability now means that
there are multiple devices that appear as a single device on the network.</p>
</li>
<li><p class="first">Replaced the photons_products_registry module with the photons_products
module. Essentially, you change code from first block to second block:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">photons_products_registry</span> <span class="kn">import</span> <span class="n">capability_for_ids</span><span class="p">,</span> <span class="n">LIFIProductRegistry</span>

<span class="n">pid</span> <span class="o">=</span> <span class="n">LIFIProductRegistry</span><span class="o">.</span><span class="n">LCM3_TILE</span><span class="o">.</span><span class="n">pid</span>
<span class="n">vid</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">cap</span> <span class="o">=</span> <span class="n">capability_for_ids</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">vid</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">cap</span><span class="o">.</span><span class="n">has_chain</span>

<span class="n">pid</span> <span class="o">=</span> <span class="n">LIFIProductRegistry</span><span class="o">.</span><span class="n">LCM2_Z</span><span class="o">.</span><span class="n">pid</span>
<span class="n">vid</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">cap</span> <span class="o">=</span> <span class="n">capability_for_ids</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">vid</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">cap</span><span class="o">.</span><span class="n">has_multizone</span>
<span class="k">assert</span> <span class="n">cap</span><span class="o">.</span><span class="n">has_extended_multizone</span><span class="p">(</span><span class="n">firmware_major</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">firmware_minor</span><span class="o">=</span><span class="mi">77</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">photons_products</span> <span class="kn">import</span> <span class="n">Products</span>

<span class="n">product</span> <span class="o">=</span> <span class="n">Products</span><span class="o">.</span><span class="n">LCM3_TILE</span>
<span class="c1"># or</span>
<span class="n">product</span> <span class="o">=</span> <span class="n">Products</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">55</span><span class="p">]</span>

<span class="k">assert</span> <span class="n">product</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">has_matrix</span>
<span class="k">assert</span> <span class="n">product</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">has_chain</span>

<span class="c1"># Accessing a name on Products that doesn&#39;t exist will raise an error</span>
<span class="c1"># But if you do say Prodcuts[1, 9001] it&#39;ll just return a product that</span>
<span class="c1"># defaults to essentially no capabilities. As this means old versions of</span>
<span class="c1"># photons won&#39;t break when it sees new devices it doesn&#39;t know about</span>

<span class="n">product</span> <span class="o">=</span> <span class="n">Products</span><span class="o">.</span><span class="n">LCM2_Z</span>
<span class="k">assert</span> <span class="n">cap</span><span class="o">.</span><span class="n">has_multizone</span>

<span class="c1"># By default it&#39;ll assume firmware_major/firmware_minor of 0/0</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">cap</span><span class="o">.</span><span class="n">has_extended_multizone</span>

<span class="c1"># But you can create a new capability object with different firmware</span>
<span class="k">assert</span> <span class="n">cap</span><span class="p">(</span><span class="n">firmware_major</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">firmware_minor</span><span class="o">=</span><span class="mi">77</span><span class="p">)</span><span class="o">.</span><span class="n">has_extended_multizone</span>
</pre></div>
</div>
</li>
</ul>
</dd>
<dt>0.22.1 - 29 September 2019</dt>
<dd><ul class="first last simple">
<li>Removed unnecessary errors from being written to the output when you
ctrl-c a script (especially tile animations)</li>
<li>Slight fix to the tile_falling animation</li>
<li>Made receiving packets a little more efficient</li>
<li>Made tile animations consume considerably less CPU</li>
<li>Also made switches for making tile animations work better on noisy networks,
see <a class="reference internal" href="tile_animations.html#tile-animation-noisy"><span class="std std-ref">Running a tile animation on a noisy network</span></a>.</li>
<li>When defining a tile animation, the <code class="docutils literal"><span class="pre">acks</span></code> option has been replaced by
the <code class="docutils literal"><span class="pre">replies</span></code> option. When replies is True, messages will be retried.</li>
<li>Introduced <code class="docutils literal"><span class="pre">collector.run_coro_as_main(coro)</span></code> for running a coroutine as
the mainline of a program. I also changed the scripts in the examples folder
to use this method, and cleaned the code in that folder a little.</li>
<li>Another adjustment to shutdown logic to handle shuttind down async
generators better</li>
<li>Added <code class="docutils literal"><span class="pre">lifx</span> <span class="pre">lan:find_ips</span></code> command</li>
<li>Fixed the broadcast option to run_with to allow ip addresses</li>
<li>Added discovery options for making photons see only particular devices and/or
hard code discovery information for environments where broadcast discovery
doesnât work so well. See <a class="reference internal" href="discovery.html#discovery"><span class="std std-ref">Device Discovery</span></a>.</li>
</ul>
</dd>
<dt>0.22.0 - 21 September 2019</dt>
<dd><ul class="first last simple">
<li>Changed the many option on packet definitions to multiple<ul>
<li>this also means that array fields are now actually arrays and can be
modified in place</li>
</ul>
</li>
<li>Upgraded bitarray dependency</li>
</ul>
</dd>
<dt>0.21.0 - 18 September 2019</dt>
<dd><ul class="first last">
<li><p class="first">Migrated to <a class="reference external" href="https://delfick-project.readthedocs.io/">delfick_project</a></p>
</li>
<li><p class="first">this essentially means the following imports change from:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">option_merge_addons</span> <span class="kn">import</span> <span class="n">option_merge_addon_hook</span>
<span class="kn">from</span> <span class="nn">input_algorithms.spec_base</span> <span class="kn">import</span> <span class="n">NotSpecified</span>
<span class="kn">from</span> <span class="nn">input_algorithms</span> <span class="kn">import</span> <span class="n">spec_base</span> <span class="k">as</span> <span class="n">sb</span>
<span class="kn">from</span> <span class="nn">input_algorithms.dictobj</span> <span class="kn">import</span> <span class="n">dictobj</span>
<span class="kn">from</span> <span class="nn">input_algorithms.meta</span> <span class="kn">import</span> <span class="n">Meta</span>
<span class="kn">from</span> <span class="nn">option_merge</span> <span class="kn">import</span> <span class="n">MergedOptions</span>
</pre></div>
</div>
<p>into:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">delfick_project.option_merge</span> <span class="kn">import</span> <span class="n">MergedOptions</span>
<span class="kn">from</span> <span class="nn">delfick_project.norms</span> <span class="kn">import</span> <span class="n">dictobj</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">Meta</span>
<span class="kn">from</span> <span class="nn">delfick_project.addons</span> <span class="kn">import</span> <span class="n">addon_hook</span>

<span class="n">NotSpecified</span> <span class="o">=</span> <span class="n">sb</span><span class="o">.</span><span class="n">NotSpecified</span>
</pre></div>
</div>
</li>
</ul>
</dd>
<dt>0.20.5 - 11 September 2019</dt>
<dd><ul class="first last simple">
<li>Fix tile animations</li>
</ul>
</dd>
<dt>0.20.4 - 2 September 2019</dt>
<dd><ul class="first last simple">
<li>Photons code is now formatted by the black project</li>
</ul>
</dd>
<dt>0.20.3 - 1 September 2019</dt>
<dd><ul class="first last simple">
<li>Mainly just minor changes</li>
<li>Also, changed the transform functionality on packet definitions. This method
is used to give a pack and an unpack function to the packet definition to
transform values when going between the raw value and value used by the
programmer. Previously only the pack received the packet being worked on,
now both functions do.</li>
</ul>
</dd>
<dt>0.20.2 - 17 July 2019</dt>
<dd><ul class="first last simple">
<li>Added a hook to tile animations for overriding the default_color_func on
the canvas</li>
</ul>
</dd>
<dt>0.20.1 - 13 July 2019</dt>
<dd><ul class="first last simple">
<li>Fixed a bug in the device finder when you use the same device finder more
than once with a different filter. It was forgetting devices from one filter
and making that device not there for a subsequent filter.</li>
</ul>
</dd>
<dt>0.20.0 - 13 July 2019</dt>
<dd><ul class="first last simple">
<li>Fixed shutdown logic so that finally blocks work when we get a SIGINT</li>
<li>Refactored the transport target mechanism. There are two breaking changes
from this work, otherwise everything should behave the same as before:<ul>
<li>photons_socket no longer exists, all that functionality now belongs in
photons_transport. It is likely that you donât need to change anything
other than enabling the <code class="docutils literal"><span class="pre">(&quot;lifx.photons&quot;,</span> <span class="pre">&quot;transport&quot;)</span></code> in your script
instead of <code class="docutils literal"><span class="pre">(&quot;lifx.photons&quot;,</span> <span class="pre">&quot;socket&quot;)</span></code></li>
<li>The third variable in a run_with call is now the original message that
was sent to get that reply</li>
</ul>
</li>
</ul>
</dd>
<dt>0.13.5 - 6 July 2019</dt>
<dd><ul class="first last">
<li><p class="first">Some code shuffling in photons_transport</p>
</li>
<li><p class="first">Removed get_list and device_forgetter from transport targets</p>
</li>
<li><p class="first">Made TransportBridge.finish an async function</p>
</li>
<li><p class="first">âlifx lan:find_devicesâ now takes a reference as the first argument, so you
can find by filter now. For example, to find all multizone devices:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">lifx</span> <span class="n">lan</span><span class="p">:</span><span class="n">find_devices</span> <span class="n">match</span><span class="p">:</span><span class="n">cap</span><span class="o">=</span><span class="n">multizone</span>
</pre></div>
</div>
</li>
<li><p class="first">Removed afr.default_broadcast. broadcast=True will use it or you can say
afr.transport_target.default_broadcast</p>
</li>
<li><p class="first">Changed how retry messages are created so that messages from the same
afr do not ever change source. This does mean that we canât have more than
256 messages to the same device in flight or we get the wrong replies to
messages, but that seems unlikely to happen</p>
</li>
</ul>
</dd>
<dt>0.13.4 - 4 May 2019</dt>
<dd><ul class="first last simple">
<li>Tiny fix to how we determine if we have enough multizone messages that
shouldnât make a difference in practice.</li>
<li>Implemented a new âPlannerâ API for gathering information from devices</li>
<li>Making code in photons_control.multizone easier to re-use</li>
<li>Added a photons_control.tile.SetTileEffect helper for easily setting tile
effects</li>
</ul>
</dd>
<dt>0.13.3 - 23 April 2019</dt>
<dd><ul class="first last simple">
<li>Fixed a bug with giving an array of complex messgaes to target.script where
it would send the messages to all devices rather than just the devices you
care about.</li>
<li>Some minor internal code shuffling</li>
<li>target.script() can now take objects that already have a run_with method
and they wonât be converted before use.</li>
<li>The simplify method on targets has been simplified (this is used by the
script mechanism to convert items into objects with a run_with method for
use)</li>
</ul>
</dd>
<dt>0.13.2 - 7 April 2019</dt>
<dd><ul class="first last simple">
<li>Fixed behaviour when you provide a list of complex messages to run_with</li>
<li>Made HardCodedSerials more efficient when the afr has already found devices</li>
</ul>
</dd>
<dt>0.13.0 - 7 April 2019</dt>
<dd><ul class="first last simple">
<li>Slight improvement to photons_control.transform.Transformer</li>
<li>Introduced photons_control.script.FromGenerator which is a complex message
that letâs you define an async generator function that yields messages to
be sent to devices</li>
<li>Introduced FromGeneratorPerSerial which is like FromGenerator but calls
the generator function per serial found in the reference.</li>
<li>Specifying an array of complex messages in a run_with will now send those
complex messages in parallel rather than one after each other. (i.e. if
you specify <code class="docutils literal"><span class="pre">run_with([Pipeline(...),</span> <span class="pre">Pipeline(...)])</span></code></li>
<li>Pipeline and Repeater are now written in terms of FromGenerator</li>
<li>Decider no longer exists</li>
<li>Created a photons_control.transform.PowerToggle message</li>
</ul>
</dd>
<dt>0.12.1 - 31 March 2019</dt>
<dd><ul class="first last simple">
<li>Removed an unnecessary option from the implementation of Transformer</li>
</ul>
</dd>
<dt>0.12.0 - 31 March 2019</dt>
<dd><ul class="first last">
<li><p class="first">Moved tile orientation logic into photons_control instead of being in
photons_tile_paint</p>
</li>
<li><p class="first">The find method on SpecialReference objects will now return even if we
didnât find all the serials we were looking for. The pattern is now:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">found</span><span class="p">,</span> <span class="n">serials</span> <span class="o">=</span> <span class="n">reference</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="n">afr</span><span class="o">.</span><span class="n">default_broadcast</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">missing</span> <span class="o">=</span> <span class="n">reference</span><span class="o">.</span><span class="n">missing</span><span class="p">(</span><span class="n">found</span><span class="p">)</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">found</span><span class="p">,</span> <span class="n">serials</span> <span class="o">=</span> <span class="n">reference</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">reference</span><span class="o">.</span><span class="n">raise_on_missing</span><span class="p">(</span><span class="n">found</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Reworked the internal API for discovery so that if we are trying to find
known serials, we donât spam the network with too many discovery packets.</p>
</li>
<li><p class="first">Changed the api for finding devices such that timeout must now be a keyword
argument and broadcast is not necessary to specify.</p>
<p>So, if you have a special reference:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># before</span>
<span class="n">found</span><span class="p">,</span> <span class="n">serials</span> <span class="o">=</span> <span class="n">await</span> <span class="n">special_reference</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

<span class="c1"># after</span>
<span class="n">found</span><span class="p">,</span> <span class="n">serials</span> <span class="o">=</span> <span class="n">await</span> <span class="n">special_reference</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p>And if you are using find_devices on the afr:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># before</span>
<span class="n">found</span> <span class="o">=</span> <span class="n">await</span> <span class="n">afr</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># after</span>
<span class="n">found</span> <span class="o">=</span> <span class="n">await</span> <span class="n">afr</span><span class="o">.</span><span class="n">find_devices</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that if you know what serials you are searching for you can ask the
afr to find them specifically by saying:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">serials</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;d073d5000001&quot;</span><span class="p">,</span> <span class="s2">&quot;d073d5000002&quot;</span><span class="p">]</span>
<span class="n">found</span><span class="p">,</span> <span class="n">missing</span> <span class="o">=</span> <span class="n">await</span> <span class="n">afr</span><span class="o">.</span><span class="n">find_specific_serials</span><span class="p">(</span><span class="n">serials</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<p>This method is much less spammy on the network than calling find_devices
till you have all your devices.</p>
</li>
</ul>
</dd>
<dt>0.11.0 - 20 March 2019</dt>
<dd><ul class="first last simple">
<li>Implemented a limit on inflight messages per run_with call<ul>
<li>As part of this, the timeout option to run_with is now message_timeout
and represents the timeout for each message rather than the whole
run_with call</li>
</ul>
</li>
<li>Updated the protocol definition<ul>
<li>Biggest change is StateHostFirmware and StateWifiFirmware now represent
the firmware version as two Uint16 instead of one Uint32. The two numbers
represent the major and minor component of the version</li>
<li>TileMessages.SetState64 and TileMessages.GetState64 are now Set64 and
Get64 respectively</li>
</ul>
</li>
<li>We now determine if we have extended multizone using version_major and
version_minor instead of build on the StateHostFirmware</li>
</ul>
</dd>
<dt>0.10.2 - 3 March 2019</dt>
<dd><ul class="first last simple">
<li>Fixed a bug when applying a theme to multiple devices</li>
</ul>
</dd>
<dt>0.10.1 - 20 February 2019</dt>
<dd><ul class="first last simple">
<li>Added messages for Extended multizone and firmware effects</li>
<li>Made photons_products_registry aware of extended multizone</li>
<li>The apply_theme action now uses extended multizone when that is available</li>
<li>Added the following actions:<ul>
<li>attr: Much like get_attr and set_attr but without the auto prefix</li>
<li>attr_actual: same as attr but shows the actual values on the responses
rather than the transformed values</li>
<li>multizone_effect: start or stop a firmware effect on your multizone
device</li>
<li>tile_effect: start or stop a firmware effect on your LIFX Tile.</li>
</ul>
</li>
<li>Fixed the set_zones action to be more useful</li>
</ul>
</dd>
<dt>0.10.0 - 23 January 2019</dt>
<dd><ul class="first last simple">
<li>Started using ruamel.yaml instead of PyYaml to load configuration</li>
</ul>
</dd>
<dt>0.9.5 - 21 January 2019</dt>
<dd><ul class="first last simple">
<li>Make the dice roll work better with multiple tiles and the combine_tiles
option</li>
<li>Made the falling animation much smoother. Many thanks to &#64;mic159!</li>
<li>Changed the <code class="docutils literal"><span class="pre">hue_ranges</span></code> option of the tile_falling animation to
<code class="docutils literal"><span class="pre">line_hues</span></code> and the <code class="docutils literal"><span class="pre">line_tip_hue</span></code> option to <code class="docutils literal"><span class="pre">line_tip_hues</span></code></li>
<li>Added tile_balls tile animation</li>
<li>Made it possible for photons_protocol to specify an enum field as having
unknown values</li>
<li>Fixed how skew_ratio in waveform messages are transformed. Itâs actually
scaled 0 to 1, not -1 to 1.</li>
</ul>
</dd>
<dt>0.9.4 - 3 January 2019</dt>
<dd><ul class="first last simple">
<li>Added get_tile_positions action</li>
<li>Adjustments to the dice font</li>
<li>Added the scripts used to generate photons_messages</li>
</ul>
</dd>
<dt>0.9.3 - 30 December 2018</dt>
<dd><ul class="first last simple">
<li>Minor changes</li>
<li>Another efficiency improvement for tile animations</li>
<li>Some fixes to the scrolling animations</li>
<li>Make it possible to combine many tiles into one animation</li>
</ul>
</dd>
<dt>0.9.2 - 27 December 2018</dt>
<dd><ul class="first last simple">
<li>Made tile_marquee work without options</li>
<li>Made animations on multiple tiles recalculate the whole animation for each
tile even if they have the same user coords</li>
<li>Fixed tile_dice_roll to work when you have specified multiple tiles</li>
<li>Take into account the orientation of the tiles when doing animations</li>
<li>apply_theme action takes tile orientation into account</li>
<li>Made tile_falling and tile_nyan animations take in a random_orientation
option for choosing random orientations for each tile</li>
</ul>
</dd>
<dt>0.9.1 - 26 December 2018</dt>
<dd><ul class="first last simple">
<li>Added tile_falling animation</li>
<li>Added tile_dice_roll animation</li>
<li>tile_marquee animation can now do dashes and underscores</li>
<li>Added a tile_dice script for putting 1 to 5 on your tiles</li>
<li>Made tile animations are lot less taxing on the CPU</li>
<li>Made tile_gameoflife animation default to using coords from the tiles
rather than assuming the tiles are in a line.</li>
<li>Changed the defaults for animations to have higher refresh rate and not
require acks on the messages</li>
<li>Made it possible to pause an animation if youâve started it programatically</li>
</ul>
</dd>
<dt>0.9.0 - 17 December 2018</dt>
<dd><p class="first">The photons_messages module is now generated via a process internal to LIFX.
The information required for this will be made public but for now Iâm making
the resulting changes to photons.</p>
<p>As part of this change there are some moves and renames to some messages.</p>
<ul class="last simple">
<li>ColourMessages is now LightMessages</li>
<li>LightPower messages are now under LightMessages</li>
<li>Infrared messages are now under LightMessages</li>
<li>Infrared messages now have <cite>brightness</cite> instead of <cite>level</cite></li>
<li>Fixed Acknowledgement message typo</li>
<li>Multizone messages have better names<ul>
<li>SetMultiZoneColorZones -&gt; SetColorZones</li>
<li>GetMultiZoneColorZones -&gt; GetColorZones</li>
<li>StateMultiZoneStateZones -&gt; StateZone</li>
<li>StateMultiZoneStateMultiZones -&gt; StateMultiZone</li>
</ul>
</li>
<li>Tile messages have better names<ul>
<li>GetTileState64 -&gt; GetState64</li>
<li>SetTileState64 -&gt; SetState64</li>
<li>StateTileState64 -&gt; State64</li>
</ul>
</li>
<li>Some reserved fields have more consistent names</li>
<li>SetWaveForm is now SetWaveform</li>
<li>SetWaveFormOptional is now SetWaveformOptional</li>
<li>num_zones field on multizone messages is now zones_count</li>
<li>The type field in SetColorZones was renamed to apply</li>
</ul>
</dd>
<dt>0.8.1 - 2 December 2018</dt>
<dd><ul class="first last simple">
<li>Added twinkles tile animation</li>
<li>Made it a bit easier to start animations programmatically</li>
</ul>
</dd>
<dt>0.8.0 - 29 November 2018</dt>
<dd><ul class="first last">
<li><p class="first">Merging photons_script module into photons_control and photons_transport</p>
</li>
<li><p class="first">Removing the need for the ATarget context manager and replacing it with a
session() context manager on the target itself.</p>
<p>So:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">photons_script.script</span> <span class="kn">import</span> <span class="n">ATarget</span>
<span class="n">async</span> <span class="k">with</span> <span class="n">ATarget</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="k">as</span> <span class="n">afr</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Becomes:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">target</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">afr</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">Pipeline/Repeater/Decider is now in photons_control.script instead of
photons_script.script.</p>
</li>
</ul>
</dd>
<dt>0.7.1 - 29 November 2018</dt>
<dd><ul class="first last simple">
<li>Made it easier to construct a SetWaveFormOptional</li>
<li>Fix handling of sockets when the network goes away</li>
</ul>
</dd>
<dt>0.7.0 - 10 November 2018</dt>
<dd><p class="first">Moved code into <code class="docutils literal"><span class="pre">photons_control</span></code> and <code class="docutils literal"><span class="pre">photons_messages</span></code>. This means
<code class="docutils literal"><span class="pre">photons_attributes</span></code>, <code class="docutils literal"><span class="pre">photons_device_messages</span></code>, <code class="docutils literal"><span class="pre">photons_tile_messages</span></code>
and <code class="docutils literal"><span class="pre">photons_transform</span></code> no longer exist.</p>
<p>Anything related to messages in those modules (and in <code class="docutils literal"><span class="pre">photons_sockets.messages</span></code>
is now in <code class="docutils literal"><span class="pre">photons_messages</span></code>.</p>
<p class="last">Everything else in those modules, and the actions from <code class="docutils literal"><span class="pre">photons_protocol</span></code>
are now in <code class="docutils literal"><span class="pre">photons_control</span></code>.</p>
</dd>
<dt>0.6.3 - 10 November 2018</dt>
<dd><ul class="first last simple">
<li>Fix potential hang when connecting to a device (very unlikely error case,
but now itâs handled).</li>
<li>Moved the __or__ functionality on packets onto the LIFXPacket object as
itâs implementation depended on fields specifically on LIFXPacket. This
is essentially a no-op within photons.</li>
<li>Added a create helper to TransportTarget</li>
</ul>
</dd>
<dt>0.6.2 - 22 October 2018</dt>
<dd><ul class="first last simple">
<li>Fixed cleanup logic</li>
<li>Make products registry aware of kelvin ranges</li>
<li>Made defaults for values in a message definition go through the spec for
that field when no value is specified</li>
<li>Donât raise an error if we canât find any devices, instead respect the
error_catcher option and only raise errors for not finding each serial that
we couldnât find</li>
</ul>
</dd>
<dt>0.6.1 - 1 September 2018</dt>
<dd><ul class="first last simple">
<li>Added the tile_gameoflife task for doing a Conwayâs game of life simulation
on your tiles.</li>
</ul>
</dd>
<dt>0.6 - 26 August 2018</dt>
<dd><ul class="first last simple">
<li>Cleaned up the code that handles retries and multiple replies<ul>
<li>multiple_replies, first_send and first_wait are no longer options
for run_with as they are no longer necessary</li>
<li>The packet definition now includes options for specifying how many
packets to expect</li>
</ul>
</li>
<li>When error_catcher to run_with is a callable, it is called straight away
with all errors instead of being put onto the asyncio loop to be called
soon. This means when you have awaited on run_with, you know that all
errors have been given to the error_catcher</li>
<li>Remove uvloop altogether. I donât think it is actually necessary and it
would break after the process was alive long enough. Also itâs disabled
for windows anyway, and something that needs to be compiled at
installation.</li>
<li>collector.configuration[âfinal_futureâ] is now the Future object itself
rather than a function returning the future.</li>
<li>Anything inheriting from TransportTarget now has <code class="docutils literal"><span class="pre">protocol_register</span></code>
attribute instead of <code class="docutils literal"><span class="pre">protocols</span></code> and <code class="docutils literal"><span class="pre">final_future</span></code> instead of
<code class="docutils literal"><span class="pre">final_fut_finder</span></code></li>
<li>Updated delfick_app to give us a âjson-console-logs argument for showing
logs as json lines</li>
</ul>
</dd>
<dt>0.5.11 - 28 July 2018</dt>
<dd><ul class="first last simple">
<li>Small fix to the version_number_spec for defining a version number on a
protocol message</li>
<li>Made uvloop optional. To turn it off put <code class="docutils literal"><span class="pre">photons_app:</span> <span class="pre">{use_uvloop:</span> <span class="pre">false}</span></code>
in your configuration.</li>
</ul>
</dd>
<dt>0.5.10 - 22 July 2018</dt>
<dd><ul class="first last simple">
<li>Made version in StateHostFirmware and StateWifiFirmware a string instead
of a float to tell the difference between â1.2â and â1.20â</li>
<li>Fix leaks of asyncio.Task objects</li>
</ul>
</dd>
<dt>0.5.9 - 15 July 2018</dt>
<dd><ul class="first last simple">
<li>Fixed a bug in the task runner such where a future could be given a result
even though it was already done.</li>
<li>Made photons_app.helpers.ChildOfFuture behave as if it was cancelled when
the parent future gets a non exception result. This is because ChildOfFuture
is used to propagate errors/cancellation rather than propagate results.</li>
<li>Upgraded PyYaml and uvloop so that you can install this under python3.7</li>
<li>Fixes to make photons compatible with python3.7</li>
</ul>
</dd>
<dt>0.5.8 - 1 July 2018</dt>
<dd><ul class="first last simple">
<li>Fixed a bug I introduced in the Transformer in 0.5.7</li>
</ul>
</dd>
<dt>0.5.7 - 1 July 2018</dt>
<dd><ul class="first last simple">
<li>Fixed the FakeTarget in photons_app.test_helpers to deal with errors
correctly</li>
<li>Made <code class="docutils literal"><span class="pre">photons_transform.transformer.Transformer</span></code> faster for most cases
by making it not check the current state of the device when it doesnât
need to</li>
</ul>
</dd>
<dt>0.5.6 - 23 June 2018</dt>
<dd><ul class="first last simple">
<li>photons_script.script.Repeater can now be stopped by raising Repater.Stop()
in the on_done_loop callback</li>
<li>DeviceFinder can now be used to target specific serials</li>
</ul>
</dd>
<dt>0.5.5 - 16 June 2018</dt>
<dd><ul class="first last simple">
<li>Small fix to how as_dict() on a packet works so it does the right thing
for packets that contain lists in the payload.</li>
<li>Added direction option to the marquee tile animation</li>
<li>Added nyan tile animation</li>
</ul>
</dd>
<dt>0.5.4 - 28 April 2018</dt>
<dd><ul class="first last">
<li><p class="first">You can now specify <code class="docutils literal"><span class="pre">(&quot;lifx.photon&quot;,</span> <span class="pre">&quot;__all__&quot;)</span></code> as a dependency and all
photons modules will be seen as a dependency of your script.</p>
<p>Note however that you should not do this in a module you expect to be used
as a dependency by another module (otherwise youâll get cyclic dependencies).</p>
</li>
</ul>
</dd>
<dt>0.5.3 - 22 April 2018</dt>
<dd><ul class="first last simple">
<li>Tiny fix to TileState64 message</li>
</ul>
</dd>
<dt>0.5.2 - 21 April 2018</dt>
<dd><ul class="first last simple">
<li>Small fixes to the tile animations</li>
</ul>
</dd>
<dt>0.5.1 - 31 March 2018</dt>
<dd><ul class="first last simple">
<li>Tile animations</li>
<li>Added a <code class="docutils literal"><span class="pre">serial</span></code> property to packets that returns the hexlified target
i.e. âd073d5000001â or None if target isnât set on the packet</li>
<li>Now installs and runs on Windows.</li>
</ul>
</dd>
<dt>0.5 - 19 March 2018</dt>
<dd>Initial opensource release after over a year of internal development.</dd>
</dl>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="photons_app/index.html" class="btn btn-neutral float-right" title="photons_app" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="known_issues.html" class="btn btn-neutral" title="Known Issues" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Stephen Moore.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>