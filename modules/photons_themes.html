

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>photons_themes &mdash; Photons 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Photons 0.1 documentation" href="../index.html"/>
        <link rel="up" title="Available Photons Modules" href="../available_modules.html"/>
        <link rel="next" title="photons_tile_paint" href="photons_tile_paint.html"/>
        <link rel="prev" title="photons_socket" href="photons_socket.html"/>
   
	<link rel="stylesheet" href="../_static/css/styles.css" type="text/css"/>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Photons
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../lifx_script.html">LIFX script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts.html">Making a Photons Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library.html">Using Photons as a library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../venvstarter.html">Using Venvstarter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../script_mechanism.html">The Script Mechanism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../finding_serials.html">Finding Serials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tile_animations.html">Tile Animations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packets.html">Packets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">ChangeLog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../photons_app/index.html">photons_app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binary_protocol.html">LIFX Binary protocol</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../available_modules.html">Available Photons Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="photons_colour.html">photons_colour</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_control.html">photons_control</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_core.html">photons_core</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_device_finder.html">photons_device_finder</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_messages.html">photons_messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_products_registry.html">photons_products_registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_protocol.html">photons_protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_socket.html">photons_socket</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">photons_themes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_themes.theme">Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_themes.collections">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_themes.appliers">Appliers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#splotch-applier">SPLOTCH applier</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stripe-appliers">STRIPE appliers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_themes.canvas">Canvas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="photons_tile_paint.html">photons_tile_paint</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_transport.html">photons_transport</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Photons</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../available_modules.html">Available Photons Modules</a> &raquo;</li>
        
      <li>photons_themes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/modules/photons_themes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="photons-themes">
<span id="id1"></span><h1>photons_themes<a class="headerlink" href="#photons-themes" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-photons_themes"></span><p>This module contains utilities for determining how to apply a range of colours
to a device.</p>
<div class="section" id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../tasks.html#tasks"><span class="std std-ref">Tasks</span></a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">apply_theme</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Apply a theme to specified device</p>
<p><code class="docutils literal"><span class="pre">lan:apply_theme</span> <span class="pre">d073d5000001</span> <span class="pre">--</span> <span class="pre">`{&quot;colors&quot;:</span> <span class="pre">&lt;colors&gt;,</span> <span class="pre">&quot;theme&quot;:</span> <span class="pre">&quot;SPLOTCH&quot;}'</span></code></p>
<p>If you don’t specify serials, then the theme will apply to all devices found on the network.</p>
<p>colors must be an array of <code class="docutils literal"><span class="pre">{&quot;hue&quot;:</span> <span class="pre">&lt;hue&gt;,</span> <span class="pre">&quot;saturation&quot;:</span> <span class="pre">&lt;saturation&gt;,</span> <span class="pre">&quot;brightness&quot;:</span> <span class="pre">&lt;brightness&gt;,</span> <span class="pre">&quot;kelvin&quot;:</span> <span class="pre">&lt;kelvin&gt;}</span></code></p>
<p>theme must be a valid theme type and defaults to SPLOTCH</p>
<p>You may also specify <code class="docutils literal"><span class="pre">duration</span></code> which is how long to take to apply in seconds.</p>
<p class="last">And you may also supply <code class="docutils literal"><span class="pre">hue</span></code>, <code class="docutils literal"><span class="pre">saturation</span></code>, <code class="docutils literal"><span class="pre">brightness</span></code> and <code class="docutils literal"><span class="pre">kelvin</span></code> to override the specified colors.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-photons_themes.theme">
<span id="theme"></span><h2>Theme<a class="headerlink" href="#module-photons_themes.theme" title="Permalink to this headline">¶</a></h2>
<p>A theme is just a collection of colors and the job of the appliers is to choose
how those colors are displayed on the device.</p>
<dl class="class">
<dt id="photons_themes.theme.Theme">
<em class="property">class </em><code class="descclassname">photons_themes.theme.</code><code class="descname">Theme</code><a class="headerlink" href="#photons_themes.theme.Theme" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper around a list of ThemeColor objects</p>
<dl class="method">
<dt id="photons_themes.theme.Theme.add_hsbk">
<code class="descname">add_hsbk</code><span class="sig-paren">(</span><em>hue</em>, <em>saturation</em>, <em>brightness</em>, <em>kelvin</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.Theme.add_hsbk" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a ThemeColor object and add it to our colors</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.theme.Theme.ensure_color">
<code class="descname">ensure_color</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.Theme.ensure_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure we have atleast one colors</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.theme.Theme.get_next_bounds_checked">
<code class="descname">get_next_bounds_checked</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.Theme.get_next_bounds_checked" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next color after this index</p>
<p>If there is no next color, then return the last color</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.theme.Theme.random">
<code class="descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.Theme.random" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a random color from our array of colors</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.theme.Theme.shuffled">
<code class="descname">shuffled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.Theme.shuffled" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new theme with the same colors but in a different order</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="photons_themes.theme.ThemeColor">
<em class="property">class </em><code class="descclassname">photons_themes.theme.</code><code class="descname">ThemeColor</code><span class="sig-paren">(</span><em>hue</em>, <em>saturation</em>, <em>brightness</em>, <em>kelvin</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.ThemeColor" title="Permalink to this definition">¶</a></dt>
<dd><p>An encapsulation of <code class="docutils literal"><span class="pre">hue</span></code>, <code class="docutils literal"><span class="pre">saturation</span></code>, <code class="docutils literal"><span class="pre">brightness</span></code> and <code class="docutils literal"><span class="pre">kelvin</span></code>.</p>
<dl class="method">
<dt id="photons_themes.theme.ThemeColor.average">
<em class="property">classmethod </em><code class="descname">average</code><span class="sig-paren">(</span><em>colors</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.ThemeColor.average" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the average of all the provided colors</p>
<p>If there are no colors we return white.</p>
</dd></dl>

<dl class="attribute">
<dt id="photons_themes.theme.ThemeColor.cache_key">
<code class="descname">cache_key</code><a class="headerlink" href="#photons_themes.theme.ThemeColor.cache_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return as tuple of tuples</p>
<p>This is used by the tile_paint module to use as a key for caching</p>
<p>It is essentially the same as tuple(sorted(color.as_dict().items()))</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.theme.ThemeColor.clone">
<code class="descname">clone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.ThemeColor.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Return another ThemeColor with the same hsbk values</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.theme.ThemeColor.limit_distance_to">
<code class="descname">limit_distance_to</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.theme.ThemeColor.limit_distance_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a color within 90 hue points of this color</p>
<p>We take or add 90 depending on whether the other color is more than 180 hue points away
where that is calculated by moving forward and wrapping around 360</p>
<p>If the difference between the two colors is less than 90, then we just return the original color</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-photons_themes.collections">
<span id="collections"></span><h2>Collections<a class="headerlink" href="#module-photons_themes.collections" title="Permalink to this headline">¶</a></h2>
<p>We have classes for storing the final colours for multi color devices.</p>
<dl class="class">
<dt id="photons_themes.collections.ZoneColors">
<em class="property">class </em><code class="descclassname">photons_themes.collections.</code><code class="descname">ZoneColors</code><a class="headerlink" href="#photons_themes.collections.ZoneColors" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of colors on a zone</p>
<dl class="method">
<dt id="photons_themes.collections.ZoneColors.add_hsbk">
<code class="descname">add_hsbk</code><span class="sig-paren">(</span><em>hsbk</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.collections.ZoneColors.add_hsbk" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a ThemeColor instance</p>
<p>The idea is you use this function to add each zone in order.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.collections.ZoneColors.apply_theme">
<code class="descname">apply_theme</code><span class="sig-paren">(</span><em>theme</em>, <em>zone_count</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.collections.ZoneColors.apply_theme" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a theme across zone_count zones</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.collections.ZoneColors.apply_to_range">
<code class="descname">apply_to_range</code><span class="sig-paren">(</span><em>color</em>, <em>next_color</em>, <em>length</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.collections.ZoneColors.apply_to_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively apply two colours to our strip such that we blend between
the two colours.</p>
</dd></dl>

<dl class="attribute">
<dt id="photons_themes.collections.ZoneColors.colors">
<code class="descname">colors</code><a class="headerlink" href="#photons_themes.collections.ZoneColors.colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of <code class="docutils literal"><span class="pre">((start_index,</span> <span class="pre">end_index),</span> <span class="pre">hsbk)</span></code> for our colors.</p>
<p>This function will make sure that contiguous colors are returned with
an appropriate <code class="docutils literal"><span class="pre">start_index</span></code>, <code class="docutils literal"><span class="pre">end_index</span></code> range.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="photons_themes.collections.TileColors">
<em class="property">class </em><code class="descclassname">photons_themes.collections.</code><code class="descname">TileColors</code><a class="headerlink" href="#photons_themes.collections.TileColors" title="Permalink to this definition">¶</a></dt>
<dd><p>A very simple wrapper around multiple tiles</p>
<dl class="method">
<dt id="photons_themes.collections.TileColors.add_tile">
<code class="descname">add_tile</code><span class="sig-paren">(</span><em>hsbks</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.collections.TileColors.add_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of 64 ThemeColor objects to represent the next tile</p>
</dd></dl>

</dd></dl>

<p>Note that we don’t have one for one colour lights because it’s only one colour!</p>
</div>
<div class="section" id="module-photons_themes.appliers">
<span id="appliers"></span><h2>Appliers<a class="headerlink" href="#module-photons_themes.appliers" title="Permalink to this headline">¶</a></h2>
<p>The applier takes in the theme and returns a collection of colours for you to
apply to the device. It is up to you to determine which applier to use and how
to actually send the colours to the device.</p>
<p>This module contains <code class="docutils literal"><span class="pre">types</span></code> which is a dictioary of
<code class="docutils literal"><span class="pre">{&lt;type&gt;:</span> <span class="pre">{&quot;0d&quot;:</span> <span class="pre">&lt;applier&gt;,</span> <span class="pre">&quot;1d&quot;:</span> <span class="pre">&lt;applier&gt;,</span> <span class="pre">&quot;2d&quot;:</span> <span class="pre">&lt;applier&gt;}}</span></code> where <code class="docutils literal"><span class="pre">0d</span></code>
is for lights with a single color, <code class="docutils literal"><span class="pre">1d</span></code> is for strips and <code class="docutils literal"><span class="pre">2d</span></code> are for tiles.</p>
<p>The <code class="docutils literal"><span class="pre">0d</span></code> is always <code class="docutils literal"><span class="pre">LightApplier</span></code></p>
<dl class="class">
<dt id="photons_themes.appliers.single.LightApplier">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.single.</code><code class="descname">LightApplier</code><a class="headerlink" href="#photons_themes.appliers.single.LightApplier" title="Permalink to this definition">¶</a></dt>
<dd><p>Get us a random color from our theme:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">applier</span> <span class="o">=</span> <span class="n">LightApplier</span><span class="p">()</span>
<span class="n">color</span> <span class="o">=</span> <span class="n">applier</span><span class="o">.</span><span class="n">apply_theme</span><span class="p">(</span><span class="n">theme</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="photons_themes.appliers.LightApplier.apply_theme">
<code class="descname">apply_theme</code><span class="sig-paren">(</span><em>theme</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.LightApplier.apply_theme" title="Permalink to this definition">¶</a></dt>
<dd><p>Just return a random color from our theme</p>
</dd></dl>

</dd></dl>

<div class="section" id="splotch-applier">
<h3>SPLOTCH applier<a class="headerlink" href="#splotch-applier" title="Permalink to this headline">¶</a></h3>
<p>The applier uses <code class="docutils literal"><span class="pre">LightApplier</span></code> for <code class="docutils literal"><span class="pre">0d</span></code> and <code class="docutils literal"><span class="pre">1d</span></code> and <code class="docutils literal"><span class="pre">2d</span></code> come
from the <code class="docutils literal"><span class="pre">splotch</span></code> module.</p>
<span class="target" id="module-photons_themes.appliers.splotch"></span><p>The appliers here are for randomly distributing the theme to the device.</p>
<dl class="class">
<dt id="photons_themes.appliers.splotch.StripApplierSplotch">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.splotch.</code><code class="descname">StripApplierSplotch</code><span class="sig-paren">(</span><em>number_zones</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.splotch.StripApplierSplotch" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a theme to a multizone device:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">applier</span> <span class="o">=</span> <span class="n">StripApplier</span><span class="p">(</span><span class="n">num_zones</span><span class="p">)</span>
<span class="k">for</span> <span class="p">(</span><span class="n">start_index</span><span class="p">,</span> <span class="n">end_index</span><span class="p">),</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">applier</span><span class="o">.</span><span class="n">apply_theme</span><span class="p">(</span><span class="n">theme</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="method">
<dt id="photons_themes.appliers.splotch.StripApplierSplotch.apply_theme">
<code class="descname">apply_theme</code><span class="sig-paren">(</span><em>theme</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.splotch.StripApplierSplotch.apply_theme" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide and conquer the zones on the strip with our colours such that we
blend from one colour to the next along the length of the strip.</p>
<p>To make the application different each time, we first create a shuffled
version of the theme which we then use.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="photons_themes.appliers.splotch.TileApplierSplotch">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.splotch.</code><code class="descname">TileApplierSplotch</code><span class="sig-paren">(</span><em>coords_and_sizes</em>, <em>just_points=False</em>, <em>post_blur=True</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.splotch.TileApplierSplotch" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to apply a random distribution of colors on a 2d device (i.e. the Tile):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">coords_and_sizes</span> <span class="o">=</span> <span class="p">[((</span><span class="n">t</span><span class="o">.</span><span class="n">user_x</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">user_y</span><span class="p">),</span> <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">height</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">]</span>

<span class="n">applier</span> <span class="o">=</span> <span class="n">TileApplier</span><span class="o">.</span><span class="n">from_user_coords</span><span class="p">(</span><span class="n">coords_and_sizes</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">colors</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">applier</span><span class="o">.</span><span class="n">apply_theme</span><span class="p">(</span><span class="n">theme</span><span class="p">)):</span>
    <span class="c1"># Apply colors to tile index i</span>
</pre></div>
</div>
<dl class="docutils">
<dt>coords_and_sizes</dt>
<dd><p class="first">A list of <code class="docutils literal"><span class="pre">((left_x,</span> <span class="pre">top_y),</span> <span class="pre">(width,</span> <span class="pre">height))</span></code> representing the top
left corner of each tile in the chain.</p>
<p class="last">Note that if you have <code class="docutils literal"><span class="pre">((user_x,</span> <span class="pre">user_y),</span> <span class="pre">(width,</span> <span class="pre">height))</span></code> values from
asking a tile for it’s device chain, then use the <code class="docutils literal"><span class="pre">from_user_coords</span></code>
classmethod to create a TileApplier from that data.</p>
</dd>
<dt>just_points</dt>
<dd>Part of the algorithm generates random points on the canvas followed by
filling in the gaps between those points. By setting this option to True
we won’t fill in the gaps</dd>
<dt>post_blur</dt>
<dd>By setting this to false we won’t blur the points after the gaps are
filled in.</dd>
</dl>
<dl class="method">
<dt id="photons_themes.appliers.splotch.TileApplierSplotch.from_user_coords">
<code class="descname">from_user_coords</code><span class="sig-paren">(</span><em>coords_and_sizes</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.splotch.TileApplierSplotch.from_user_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a TileApplier from the <code class="docutils literal"><span class="pre">[((user_x,</span> <span class="pre">user_y),</span> <span class="pre">(width,</span> <span class="pre">height)),</span> <span class="pre">...]</span></code>
returned by a GetDeviceChain message.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.appliers.splotch.TileApplierSplotch.apply_theme">
<code class="descname">apply_theme</code><span class="sig-paren">(</span><em>theme</em>, <em>return_canvas=False</em>, <em>canvas=None</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.splotch.TileApplierSplotch.apply_theme" title="Permalink to this definition">¶</a></dt>
<dd><p>If a canvas is not supplied then we create a new canvas with random points
around where each tile is. We then shuffle those points and blur them
a little.</p>
<p>We then fill in the gaps between the points.</p>
<p>Then we blur the filled in points and create the 64 hsbk values for each
tile.</p>
<p>We return the list of <code class="docutils literal"><span class="pre">[&lt;64</span> <span class="pre">hsbks&gt;,</span> <span class="pre">&lt;64</span> <span class="pre">hsbks&gt;,</span> <span class="pre">...]</span></code>.</p>
<p>If <code class="docutils literal"><span class="pre">return_canvas</span></code> is True then we return a tuple of <code class="docutils literal"><span class="pre">(tiles,</span> <span class="pre">canvas)</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stripe-appliers">
<h3>STRIPE appliers<a class="headerlink" href="#stripe-appliers" title="Permalink to this headline">¶</a></h3>
<p>All the STRIPE appliers use <code class="docutils literal"><span class="pre">LightApplier</span></code> and <code class="docutils literal"><span class="pre">StripApplierSplotch</span></code> for
<code class="docutils literal"><span class="pre">0d</span></code> and <code class="docutils literal"><span class="pre">1d</span></code> respectively.</p>
<p>There is <code class="docutils literal"><span class="pre">VERTICAL_STRIPE</span></code>, <code class="docutils literal"><span class="pre">HORIZONTAL_STRIPE</span></code>, <code class="docutils literal"><span class="pre">DOWN_DIAGONAL_STRIPE</span></code>
and <code class="docutils literal"><span class="pre">UP_DIAGONAL_STRIPE</span></code> appliers.</p>
<span class="target" id="module-photons_themes.appliers.stripes"></span><p>These appliers generate colors for each point using a function</p>
<dl class="class">
<dt id="photons_themes.appliers.stripes.TileApplierVerticalStripe">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.stripes.</code><code class="descname">TileApplierVerticalStripe</code><span class="sig-paren">(</span><em>coords_and_sizes</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.stripes.TileApplierVerticalStripe" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to apply a vertical stripe to the tiles in a chain</p>
</dd></dl>

<dl class="class">
<dt id="photons_themes.appliers.stripes.TileApplierHorizontalStripe">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.stripes.</code><code class="descname">TileApplierHorizontalStripe</code><span class="sig-paren">(</span><em>coords_and_sizes</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.stripes.TileApplierHorizontalStripe" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to apply a horizontal stripe to the tiles in a chain</p>
</dd></dl>

<dl class="class">
<dt id="photons_themes.appliers.stripes.TileApplierDownDiagnoalStripe">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.stripes.</code><code class="descname">TileApplierDownDiagnoalStripe</code><span class="sig-paren">(</span><em>coords_and_sizes</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.stripes.TileApplierDownDiagnoalStripe" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes diagonal stripes that go from the top left to the bottom right</p>
</dd></dl>

<dl class="class">
<dt id="photons_themes.appliers.stripes.TileApplierUpDiagnoalStripe">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.stripes.</code><code class="descname">TileApplierUpDiagnoalStripe</code><span class="sig-paren">(</span><em>coords_and_sizes</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.stripes.TileApplierUpDiagnoalStripe" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes diagonal stripes that go from the bottom left to the top right</p>
</dd></dl>

<dl class="class">
<dt id="photons_themes.appliers.stripes.TileApplierSquareStripe">
<em class="property">class </em><code class="descclassname">photons_themes.appliers.stripes.</code><code class="descname">TileApplierSquareStripe</code><span class="sig-paren">(</span><em>coords_and_sizes</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.appliers.stripes.TileApplierSquareStripe" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes progressively bigger squares from the center point on the canvas</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-photons_themes.canvas">
<span id="canvas"></span><h2>Canvas<a class="headerlink" href="#module-photons_themes.canvas" title="Permalink to this headline">¶</a></h2>
<p>The canvas is class for storing the 2d grid of colours for tiles. The canvas is
usually the colours across multiple tiles and then the TileApplier is able to
extract each tile from the canvas</p>
<dl class="class">
<dt id="photons_themes.canvas.Canvas">
<em class="property">class </em><code class="descclassname">photons_themes.canvas.</code><code class="descname">Canvas</code><a class="headerlink" href="#photons_themes.canvas.Canvas" title="Permalink to this definition">¶</a></dt>
<dd><p>This is just a collection of points with methods for interacting with those
points.</p>
<p>The points are stored as (i, j) in a dictionary. Ideally the points values
are <code class="docutils literal"><span class="pre">photons_themes.theme.ThemeColor</span></code> objects.</p>
<dl class="method">
<dt id="photons_themes.canvas.Canvas.add_points_for_tile">
<code class="descname">add_points_for_tile</code><span class="sig-paren">(</span><em>left_x</em>, <em>top_y</em>, <em>tile_width</em>, <em>tile_height</em>, <em>theme</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.add_points_for_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create points on the canvas around where a tile is.</p>
<p>We create an area that’s half the tile width/height beyond the boundary
of the tile.</p>
<p>We also spread the points out in a random manner and try to avoid having
points next to each other.</p>
<p>Multiple calls to this function will not override existing points on the
canvas</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.blur">
<code class="descname">blur</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.blur" title="Permalink to this definition">¶</a></dt>
<dd><p>For each point, find the average colour of that point plus all surrounding
points.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.blur_by_distance">
<code class="descname">blur_by_distance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.blur_by_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to blur but will find the 8 closest points as opposed to the 8
surrounding points.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.closest_points">
<code class="descname">closest_points</code><span class="sig-paren">(</span><em>i</em>, <em>j</em>, <em>consider</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.closest_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal"><span class="pre">[(distance,</span> <span class="pre">color),</span> <span class="pre">...]</span></code> for <code class="docutils literal"><span class="pre">consider</span></code> closest points to (i, j)</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.fill_in_points">
<code class="descname">fill_in_points</code><span class="sig-paren">(</span><em>canvas</em>, <em>left_x</em>, <em>top_y</em>, <em>tile_width</em>, <em>tile_height</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.fill_in_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill in the gaps on this canvas by blurring the points on the provided
canvas around where our tile is.</p>
<p>We blur by finding the 4 closest points for each point on our tile and
averaging them.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>point</em>, <em>dflt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a point or the passed in <code class="docutils literal"><span class="pre">dflt</span></code> value if the point doesn’t exist</p>
<p>If this canvas has a default_color_func then dflt is ignored and the
default_color_func is used instead</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.has_neighbour">
<code class="descname">has_neighbour</code><span class="sig-paren">(</span><em>i</em>, <em>j</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.has_neighbour" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether there are any points around this (i, j) position</p>
</dd></dl>

<dl class="attribute">
<dt id="photons_themes.canvas.Canvas.height">
<code class="descname">height</code><a class="headerlink" href="#photons_themes.canvas.Canvas.height" title="Permalink to this definition">¶</a></dt>
<dd><p>The distance between the left most y value in the points and the right
most y value.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.points_for_tile">
<code class="descname">points_for_tile</code><span class="sig-paren">(</span><em>left_x</em>, <em>top_y</em>, <em>tile_width</em>, <em>tile_height</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.points_for_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of 64 hsbk values for this tile</p>
<p>For any point on the tile that doesn’t have a corresponding point on the
canvas return a grey value. This is useful for when we tell the applier
to not fill in the gaps.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.set_all_points_for_tile">
<code class="descname">set_all_points_for_tile</code><span class="sig-paren">(</span><em>left_x</em>, <em>top_y</em>, <em>tile_width</em>, <em>tile_height</em>, <em>get_color</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.set_all_points_for_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Translates x, y points relative to a single tile to the tile position on the canvas</p>
<p>So let’s say a tile is at (10, 2) then get_color will be called with (x, y) from
0 to tile_width, 0 to tile_height and those points get translated to start from (10, 2)</p>
<dl class="docutils">
<dt>NOTE: get_color gets y where higher y means moving down, whereas the coordinates on the canvas</dt>
<dd>is higher y means moving up.</dd>
</dl>
<p>So let’s say you have a 4 by 4 tile, get_color will be called with the following points:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(0, 0) (1, 0) (2, 0) (3, 0)
(0, 1) (1, 1) (2, 1) (3, 1)
(0, 2) (1, 2) (2, 2) (3, 2)
(0, 3) (1, 3) (2, 3) (3, 3)
</pre></div>
</div>
<p>And if you have left_x, top_y of (10, 4), it’ll set the following points on the canvas:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(10, 4) (11, 4) (12, 4) (13, 4)
(10, 3) (11, 3) (12, 3) (13, 3)
(10, 2) (11, 2) (12, 2) (13, 2)
(10, 1) (11, 1) (12, 1) (13, 1)
</pre></div>
</div>
<p>if get_color returns None, then no point is set for that turn</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.set_color_func">
<code class="descname">set_color_func</code><span class="sig-paren">(</span><em>color_func</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.set_color_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a color func to the canvas</p>
<p>This will override any points that are on the canvas
on getting those points.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.set_default_color_func">
<code class="descname">set_default_color_func</code><span class="sig-paren">(</span><em>default_color_func</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.set_default_color_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a default color func to the canvas</p>
<p>This will be used when getting points on the canvas that aren’t filled.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.shuffle_points">
<code class="descname">shuffle_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.shuffle_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Take all the points and move them around a random amount</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.surrounding_colors">
<code class="descname">surrounding_colors</code><span class="sig-paren">(</span><em>i</em>, <em>j</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.surrounding_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the colors that surround this (i, j) point.</p>
<p>This will only return points that exist.</p>
</dd></dl>

<dl class="method">
<dt id="photons_themes.canvas.Canvas.surrounding_points">
<code class="descname">surrounding_points</code><span class="sig-paren">(</span><em>i</em>, <em>j</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_themes.canvas.Canvas.surrounding_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the co-ordinates that are neighbours of this point</p>
</dd></dl>

<dl class="attribute">
<dt id="photons_themes.canvas.Canvas.width">
<code class="descname">width</code><a class="headerlink" href="#photons_themes.canvas.Canvas.width" title="Permalink to this definition">¶</a></dt>
<dd><p>The distance between the left most x value in the points and the right
most x value.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="photons_tile_paint.html" class="btn btn-neutral float-right" title="photons_tile_paint" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="photons_socket.html" class="btn btn-neutral" title="photons_socket" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Stephen Moore.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>