

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>photons_control &mdash; Photons 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Photons 0.1 documentation" href="../index.html"/>
        <link rel="up" title="Available Photons Modules" href="../available_modules.html"/>
        <link rel="next" title="photons_core" href="photons_core.html"/>
        <link rel="prev" title="photons_colour" href="photons_colour.html"/>
   
	<link rel="stylesheet" href="../_static/css/styles.css" type="text/css"/>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Photons
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../lifx_script.html">LIFX script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts.html">Making a Photons Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library.html">Using Photons as a library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../venvstarter.html">Using Venvstarter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../script_mechanism.html">The Script Mechanism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../planner.html">Planner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config_file.html">Config file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../discovery.html">Device Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../finding_serials.html">Finding Serials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tile_animations.html">Tile Animations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packets.html">Packets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">ChangeLog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../photons_app/index.html">photons_app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binary_protocol.html">LIFX Binary protocol</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../available_modules.html">Available Photons Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="photons_colour.html">photons_colour</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">photons_control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#planner">Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_control.script">Script helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_control.transform">Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_control.multizone">Multizone Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-photons_control.tile">Tile Helpers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="photons_core.html">photons_core</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_device_finder.html">photons_device_finder</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_messages.html">photons_messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_products.html">photons_products</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_protocol.html">photons_protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_pytest.html">photons_pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_themes.html">photons_themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_tile_paint.html">photons_tile_paint</a></li>
<li class="toctree-l2"><a class="reference internal" href="photons_transport.html">photons_transport</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Photons</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../available_modules.html">Available Photons Modules</a> &raquo;</li>
        
      <li>photons_control</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/modules/photons_control.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="photons-control">
<span id="id1"></span><h1>photons_control<a class="headerlink" href="#photons-control" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-photons_control"></span><p>Utilities and actions for interacting with devices and binary packets.</p>
<div class="section" id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../tasks.html#tasks"><span class="std std-ref">Tasks</span></a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">unpack_base64</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
</tr>
<tr class="row-odd"><td><p class="first">Unpack base64 string found after the <code class="docutils literal"><span class="pre">--</span></code> into a json dictionary</p>
<p class="last"><code class="docutils literal"><span class="pre">unpack_base64</span> <span class="pre">--</span> <span class="pre">MQAAFIIF7TPQc9USYeIAAAAAAAAAAAMBAAAAAAAAAABmAAAAAPRpAAD//6wNAAAAAA==</span></code></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">unpack</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
</tr>
<tr class="row-odd"><td><p class="first">Unpack hexlified string found after the <code class="docutils literal"><span class="pre">--</span></code> into a json dictionary</p>
<p class="last"><code class="docutils literal"><span class="pre">unpack</span> <span class="pre">--</span> <span class="pre">310000148205ed33d073d51261e20000000000000000030100000000000000006600000000f4690000ffffac0d00000000</span></code></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">transform</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Do a http-api like transformation over whatever target you specify</p>
<p><code class="docutils literal"><span class="pre">target:transform</span> <span class="pre">d073d5000000</span> <span class="pre">--</span> <span class="pre">'{&quot;color&quot;:</span> <span class="pre">&quot;red&quot;,</span> <span class="pre">&quot;effect&quot;:</span> <span class="pre">&quot;pulse&quot;}'</span></code></p>
<p class="last">It takes in <code class="docutils literal"><span class="pre">color</span></code>, <code class="docutils literal"><span class="pre">effect</span></code>, <code class="docutils literal"><span class="pre">power</span></code> and valid options for a
<code class="docutils literal"><span class="pre">SetWaveformOptional</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">tile_effect</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Set an animation on your tile!</p>
<p><code class="docutils literal"><span class="pre">lan:tile_effect</span> <span class="pre">d073d5000001</span> <span class="pre">&lt;type&gt;</span> <span class="pre">--</span> <span class="pre">'{&lt;options&gt;}'</span></code></p>
<p>Where type is one of the available effect types:</p>
<dl class="docutils">
<dt>OFF</dt>
<dd>Turn of the animation off</dd>
<dt>MORPH</dt>
<dd>Move through a perlin noise map, assigning pixel values from a
16-color palette</dd>
<dt>FLAME</dt>
<dd>A flame effect</dd>
</dl>
<p>For effects that take in a palette option, you may specify palette as
<code class="docutils literal"><span class="pre">[{&quot;hue&quot;:</span> <span class="pre">0,</span> <span class="pre">&quot;saturation&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;brightness&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;kelvin&quot;:</span> <span class="pre">2500},</span> <span class="pre">...]</span></code></p>
<p>or as <code class="docutils literal"><span class="pre">[[0,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">2500],</span> <span class="pre">...]</span></code> or as <code class="docutils literal"><span class="pre">[[0,</span> <span class="pre">1,</span> <span class="pre">1],</span> <span class="pre">...]</span></code></p>
<p class="last">or as <code class="docutils literal"><span class="pre">[&quot;red&quot;,</span> <span class="pre">&quot;hue:100</span> <span class="pre">saturation:1&quot;,</span> <span class="pre">&quot;blue&quot;]</span></code></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">set_zones</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Set the zones colors on a light strip</p>
<p>Usage looks like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">lifx</span> <span class="n">lan</span><span class="p">:</span><span class="n">set_zones</span> <span class="n">d073d5000001</span> <span class="o">--</span> <span class="s1">&#39;{&quot;colors&quot;: [[&quot;red&quot;, 10], [&quot;blue&quot;, 3], [&quot;green&quot;, 5]]}&#39;</span>
</pre></div>
</div>
<p class="last">In that example the strip will have the first 10 zones set to red, then 3
blue zones and then 5 green zones</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">set_tile_positions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Set the positions of the tiles in your chain.</p>
<p class="last"><code class="docutils literal"><span class="pre">lan:set_tile_positions</span> <span class="pre">d073d5f09124</span> <span class="pre">--</span> <span class="pre">'[[0,</span> <span class="pre">0],</span> <span class="pre">[-1,</span> <span class="pre">0],</span> <span class="pre">[-1,</span> <span class="pre">1]]'</span></code></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">set_color</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Change specified bulb to specified colour</p>
<p><code class="docutils literal"><span class="pre">target:set_color</span> <span class="pre">d073d50000</span> <span class="pre">red</span> <span class="pre">--</span> <span class="pre">'{&quot;hue&quot;:</span> <span class="pre">205}'</span></code></p>
<p>The format of this task is <code class="docutils literal"><span class="pre">&lt;reference&gt;</span> <span class="pre">&lt;color&gt;</span> <span class="pre">--</span> <span class="pre">&lt;overrides&gt;</span></code> where
overrides is optional.</p>
<p class="last">The color may be any valid color specifier.</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">set_chain_state</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Set the state of colors on your tile</p>
<p><code class="docutils literal"><span class="pre">lan:set_chain_state</span> <span class="pre">d073d5f09124</span> <span class="pre">--</span> <span class="pre">'{&quot;colors&quot;:</span> <span class="pre">[[[0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">3500],</span> <span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">3500],</span> <span class="pre">...],</span> <span class="pre">[[0,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">3500],</span> <span class="pre">...],</span> <span class="pre">...],</span> <span class="pre">&quot;tile_index&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;length&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;x&quot;:</span> <span class="pre">0,</span> <span class="pre">&quot;y&quot;:</span> <span class="pre">0,</span> <span class="pre">&quot;width&quot;:</span> <span class="pre">8}'</span></code></p>
<p class="last">Where the colors is a grid of 8 rows of 8 <code class="docutils literal"><span class="pre">[h,</span> <span class="pre">s,</span> <span class="pre">b,</span> <span class="pre">k]</span></code> values.</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">set_attr</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Set attributes on your globes</p>
<p><code class="docutils literal"><span class="pre">target:set_attr</span> <span class="pre">d073d5000000</span> <span class="pre">color</span> <span class="pre">--</span> <span class="pre">'{&quot;hue&quot;:</span> <span class="pre">360,</span> <span class="pre">&quot;saturation&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;brightness&quot;:</span> <span class="pre">1}'</span></code></p>
<p>This does the same thing as <code class="docutils literal"><span class="pre">get_attr</span></code> but will look for <code class="docutils literal"><span class="pre">Set&lt;Attr&gt;</span></code>
message and initiates it with the options found after the <code class="docutils literal"><span class="pre">--</span></code>.</p>
<p class="last">So in this case it will create <code class="docutils literal"><span class="pre">SetColor(hue=360,</span> <span class="pre">saturation=1,</span> <span class="pre">brightness=1)</span></code>
and send that to the device.</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">pack_payload</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
</tr>
<tr class="row-odd"><td><p class="first">Pack json found after the <code class="docutils literal"><span class="pre">--</span></code> into hexlified string</p>
<p class="last"><code class="docutils literal"><span class="pre">pack_payload</span> <span class="pre">117</span> <span class="pre">--</span> <span class="pre">'{&quot;level&quot;:</span> <span class="pre">65535,</span> <span class="pre">&quot;duration&quot;:</span> <span class="pre">10}'</span></code></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">pack</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
</tr>
<tr class="row-odd"><td><p class="first">Pack json found after the <code class="docutils literal"><span class="pre">--</span></code> into hexlified string</p>
<p class="last"><code class="docutils literal"><span class="pre">pack</span> <span class="pre">--</span> <span class="pre">'{&quot;frame_address&quot;:</span> <span class="pre">{&quot;ack_required&quot;:</span> <span class="pre">true,</span> <span class="pre">&quot;res_required&quot;:</span> <span class="pre">true,</span> <span class="pre">&quot;reserved2&quot;:</span> <span class="pre">&quot;000000000000&quot;,</span> <span class="pre">&quot;reserved3&quot;:</span> <span class="pre">&quot;00&quot;,</span> <span class="pre">&quot;sequence&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;target&quot;:</span> <span class="pre">&quot;0000000000000000&quot;},</span> <span class="pre">&quot;frame_header&quot;:</span> <span class="pre">{&quot;addressable&quot;:</span> <span class="pre">true,</span> <span class="pre">&quot;protocol&quot;:</span> <span class="pre">1024,</span> <span class="pre">&quot;reserved1&quot;:</span> <span class="pre">&quot;00&quot;,</span> <span class="pre">&quot;size&quot;:</span> <span class="pre">68,</span> <span class="pre">&quot;source&quot;:</span> <span class="pre">591976603,</span> <span class="pre">&quot;tagged&quot;:</span> <span class="pre">false},</span> <span class="pre">&quot;payload&quot;:</span> <span class="pre">{},</span> <span class="pre">&quot;protocol_header&quot;:</span> <span class="pre">{&quot;pkt_type&quot;:</span> <span class="pre">45,</span> <span class="pre">&quot;reserved4&quot;:</span> <span class="pre">&quot;0000000000000000&quot;,</span> <span class="pre">&quot;reserved5&quot;:</span> <span class="pre">&quot;0000&quot;}}'</span></code></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">multizone_effect</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Set an animation on your strip!</p>
<p><code class="docutils literal"><span class="pre">lan:multizone_effect</span> <span class="pre">d073d5000001</span> <span class="pre">&lt;type&gt;</span> <span class="pre">--</span> <span class="pre">'{&lt;options&gt;}'</span></code></p>
<p>Where type is one of the available effect types:</p>
<dl class="docutils">
<dt>OFF</dt>
<dd>Turn the animation off</dd>
<dt>MOVE</dt>
<dd>A moving animation</dd>
</dl>
<p class="last">Options include:
- offset
- speed
- duration</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">get_zones</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Get the zones colors from a light strip</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">get_tile_positions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Get the positions of the tiles in your chain.</p>
<p class="last"><code class="docutils literal"><span class="pre">lan:get_tile_positions</span> <span class="pre">d073d5f09124</span></code></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">get_effects</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">get_device_chain</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Get the devices in your chain</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">get_chain_state</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Get the colors of the tiles in your chain</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">get_attr</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Get attributes from your globes</p>
<p><code class="docutils literal"><span class="pre">target:get_attr</span> <span class="pre">d073d5000000</span> <span class="pre">color</span></code></p>
<p>Where <code class="docutils literal"><span class="pre">d073d5000000</span></code> is replaced with the serial of the device you are
addressing and <code class="docutils literal"><span class="pre">color</span></code> is replaced with the attribute you want.</p>
<p>This task works by looking at all the loaded LIFX binary protocol messages
defined for the 1024 protocol and looks for <code class="docutils literal"><span class="pre">Get&lt;Attr&gt;</span></code>.</p>
<p class="last">So if you want the <code class="docutils literal"><span class="pre">color</span></code> attribute, it will look for the <code class="docutils literal"><span class="pre">GetColor</span></code>
message and send that to the device and print out the reply packet we get
back.</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">find_ips</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">List the ips of the devices that can be found on the network</p>
<blockquote>
<div>lifx lan:find_ips</div></blockquote>
<p>You can specify a different broadcast address by saying:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">lifx</span> <span class="n">lan</span><span class="p">:</span><span class="n">find_ips</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.255</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">find_devices</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">List the devices that can be found on the network:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">lifx</span> <span class="n">lan</span><span class="p">:</span><span class="n">find_devices</span>
</pre></div>
</div>
<p>You can specify a different broadcast address by saying:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">lifx</span> <span class="n">lan</span><span class="p">:</span><span class="n">find_devices</span> <span class="n">_</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.255</span>
</pre></div>
</div>
<p>Otherwise it will use the default broadcast address for the target you are
using. (i.e. the lan target by default broadcasts to 255.255.255.255)</p>
<p>You can find specific devices by specifying a reference:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">lifx</span> <span class="n">lan</span><span class="p">:</span><span class="n">find_devices</span> <span class="n">match</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="n">kitchen</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">attr_actual</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Same as the attr command but prints out the actual values on the replies rather than transformed values</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">attr</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li>Can take in a special reference</li>
<li>not specifying a reference will result in finding all devices on the network</li>
<li>Needs a target to be specified</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Send a message to your bulb and print out all the replies.</p>
<p>This is the same as the get_attr and set_attr commands but doesn’t prefix the wanted message with get or set</p>
<p class="last"><code class="docutils literal"><span class="pre">target:attr</span> <span class="pre">d073d5000000</span> <span class="pre">get_host_firmware</span></code></p>
</td>
</tr>
</tbody>
</table>
<span class="target" id="module-photons_control.attributes"></span><dl class="function">
<dt id="photons_control.attributes.make_color">
<code class="descclassname">photons_control.attributes.</code><code class="descname">make_color</code><span class="sig-paren">(</span><em>specifier</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.attributes.make_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Return {“hue”, “saturation”, “brightness”, “kelvin”} dictionary for this specifier.</p>
<p>If it’s a string, use photons_colour.Parser.hsbk</p>
<p>If it’s a list, then take h, s, b, k from the list and default to 0, 0, 1, 3500
The list can be 0 to 4 items long</p>
<p>If it’s a dictionary, get hue, saturation, brightness, kelvin from it
values default to 0, 0, 1, 3500</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.attributes.make_colors">
<em class="property">for ... in </em><code class="descclassname">photons_control.attributes.</code><code class="descname">make_colors</code><span class="sig-paren">(</span><em>colors</em>, <em>overrides=None</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.attributes.make_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>yield [{“hue”, “saturation”, “brightness”, “kelvin”}, …] colors for these colors and overrides</p>
<p>Colors must be an array of [[specifier, length], …]</p>
<p>We use make_color with each specifier and apply overrides to the result and then
yield length amount of the resulting dictionary for each specifier.</p>
</dd></dl>

</div>
<div class="section" id="planner">
<h2>Planner<a class="headerlink" href="#planner" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../planner.html#planner"><span class="std std-ref">Planner</span></a>.</p>
</div>
<div class="section" id="module-photons_control.script">
<span id="script-helpers"></span><h2>Script helpers<a class="headerlink" href="#module-photons_control.script" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="photons_control.script.FromGenerator">
<em class="property">class </em><code class="descclassname">photons_control.script.</code><code class="descname">FromGenerator</code><span class="sig-paren">(</span><em>generator</em>, <em>*</em>, <em>reference_override=None</em>, <em>error_catcher_override=None</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.script.FromGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>FromGenerator let’s you determine what messages to send in an async generator.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">def</span> <span class="nf">gen</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">afr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">get_power</span> <span class="o">=</span> <span class="n">DeviceMessages</span><span class="o">.</span><span class="n">GetPower</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">pkt</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">afr</span><span class="o">.</span><span class="n">transport_target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">get_power</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">afr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">pkt</span> <span class="o">|</span> <span class="n">DeviceMessages</span><span class="o">.</span><span class="n">StatePower</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pkt</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">DeviceMessages</span><span class="o">.</span><span class="n">SetPower</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">65535</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">pkt</span><span class="o">.</span><span class="n">serial</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">DeviceMessages</span><span class="o">.</span><span class="n">SetPower</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">pkt</span><span class="o">.</span><span class="n">serial</span><span class="p">)</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">FromGenerator</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="n">await</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="o">.</span><span class="n">run_with_all</span><span class="p">(</span><span class="s2">&quot;d073d5000001&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that all messages you yield from the generator must already have target
set on them.</p>
<p>The generator function receives the reference supplied to the run_with as well
as the afr object and any keyword arguments that were passed into run_with.</p>
<p>All messages that are yielded from the generator are sent in parallel</p>
<p>The return value from yield will be a future that resolves to True if the
message(s) were sent without error, and False if they were sent with error.</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.script.FromGeneratorPerSerial">
<code class="descclassname">photons_control.script.</code><code class="descname">FromGeneratorPerSerial</code><span class="sig-paren">(</span><em>inner_gen</em>, <em>**generator_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.script.FromGeneratorPerSerial" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as a FromGenerator except it will call your inner_gen per serial in
the reference given to run_with.</p>
<p>This handles resolving the reference into serials and complaining if a serial
does not exist</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.script.Pipeline">
<code class="descclassname">photons_control.script.</code><code class="descname">Pipeline</code><span class="sig-paren">(</span><em>*children</em>, <em>spread=0</em>, <em>short_circuit_on_error=False</em>, <em>synchronized=False</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.script.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>This allows you to send messages in order, so that each message isn’t sent
until the previous message gets a reply or times out.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">msg1</span> <span class="o">=</span> <span class="n">MessageOne</span><span class="p">()</span>
<span class="n">msg2</span> <span class="o">=</span> <span class="n">MessageTwo</span><span class="p">()</span>

<span class="n">reference1</span> <span class="o">=</span> <span class="s2">&quot;d073d500000&quot;</span>
<span class="n">reference2</span> <span class="o">=</span> <span class="s2">&quot;d073d500001&quot;</span>

<span class="n">async</span> <span class="k">with</span> <span class="n">target</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">afr</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">Pipeline</span><span class="p">(</span><span class="n">msg1</span><span class="p">,</span> <span class="n">msg2</span><span class="p">))</span><span class="o">.</span><span class="n">run_with</span><span class="p">([</span><span class="n">reference1</span><span class="p">,</span> <span class="n">reference2</span><span class="p">],</span> <span class="n">afr</span><span class="p">):</span>
        <span class="o">....</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">target</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">afr</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg1</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">([</span><span class="n">reference1</span><span class="p">],</span> <span class="n">afr</span><span class="p">):</span>
        <span class="o">...</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg2</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">([</span><span class="n">reference1</span><span class="p">],</span> <span class="n">afr</span><span class="p">):</span>
        <span class="o">...</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg1</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">([</span><span class="n">reference2</span><span class="p">],</span> <span class="n">afr</span><span class="p">):</span>
        <span class="o">...</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg2</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">([</span><span class="n">reference2</span><span class="p">],</span> <span class="n">afr</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>This also takes in the following keyword arguments:</p>
<dl class="docutils">
<dt>spread</dt>
<dd>Specify how much wait (in seconds) between each message per device</dd>
<dt>short_circuit_on_error</dt>
<dd><p class="first">Stop trying to send messages to a device if we encounter an error.</p>
<p class="last">This will only effect sending messages to the device that had an error</p>
</dd>
<dt>synchronized</dt>
<dd><p class="first">If this is set to False then each bulb gets it’s own coroutine and so
messages will go at different times depending on how slow/fast each bulb
is.</p>
<p class="last">If this is set to True then we wait on the slowest bulb before going to
the next message.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="photons_control.script.Repeater">
<code class="descclassname">photons_control.script.</code><code class="descname">Repeater</code><span class="sig-paren">(</span><em>msg</em>, <em>min_loop_time=30</em>, <em>on_done_loop=None</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.script.Repeater" title="Permalink to this definition">¶</a></dt>
<dd><p>This will send the provided msg in an infinite loop</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">msg1</span> <span class="o">=</span> <span class="n">MessageOne</span><span class="p">()</span>
<span class="n">msg2</span> <span class="o">=</span> <span class="n">MessageTwo</span><span class="p">()</span>

<span class="n">reference</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;d073d500000&quot;</span><span class="p">,</span> <span class="s2">&quot;d073d500001&quot;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">error_catcher</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="n">async</span> <span class="k">with</span> <span class="n">target</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">afr</span><span class="p">:</span>
    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">msg1</span><span class="p">,</span> <span class="n">msg2</span><span class="p">,</span> <span class="n">spread</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">repeater</span> <span class="o">=</span> <span class="n">Repeater</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">min_loop_time</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">repeater</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">afr</span><span class="p">,</span> <span class="n">error_catcher</span><span class="o">=</span><span class="n">error_catcher</span><span class="p">):</span>
        <span class="o">....</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">with</span> <span class="n">target</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">afr</span><span class="p">:</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">afr</span><span class="p">):</span>
            <span class="o">...</span>
        <span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">20</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that if references is a photons_app.special.SpecialReference then we
call reset on it after every loop.</p>
<p>Also it is highly recommended that error_catcher is a callable that takes
each error as they happen.</p>
<p>Repeater takes in the following keyword arguments:</p>
<dl class="docutils">
<dt>min_loop_time</dt>
<dd><p class="first">The minimum amount of time a loop should take, in seconds.</p>
<p class="last">So if min_loop_time is 30 and the loop takes 10 seconds, then we’ll wait
20 seconds before going again</p>
</dd>
<dt>on_done_loop</dt>
<dd><p class="first">An async callable that is called with no arguments when a loop completes
(before any sleep from min_loop_time)</p>
<p class="last">Note that if you raise <code class="docutils literal"><span class="pre">Repeater.Stop()</span></code> in this function then the
Repeater will stop.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="photons_control.script.find_serials">
<em class="property">await </em><code class="descclassname">photons_control.script.</code><code class="descname">find_serials</code><span class="sig-paren">(</span><em>reference</em>, <em>args_for_run</em>, <em>timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.script.find_serials" title="Permalink to this definition">¶</a></dt>
<dd><p>Return (serials, missing) for all the serials that can be found in the
provided reference</p>
<p>If the reference is an empty string, a single underscore or None then we
find all devices on the network</p>
<p>if it is a string or a list of strings, we treat those strings as the serials
to find.</p>
<p>Otherwise we assume it’s a special reference</p>
</dd></dl>

</div>
<div class="section" id="module-photons_control.transform">
<span id="transformer"></span><h2>Transformer<a class="headerlink" href="#module-photons_control.transform" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="photons_control.transform.Transformer">
<em class="property">class </em><code class="descclassname">photons_control.transform.</code><code class="descname">Transformer</code><a class="headerlink" href="#photons_control.transform.Transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>This is responsible for creating the messages to send to a device for a
transformation</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">Transformer</span><span class="o">.</span><span class="n">using</span><span class="p">({</span><span class="s2">&quot;power&quot;</span><span class="p">:</span> <span class="s2">&quot;on&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">},</span> <span class="n">keep_brightness</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">async</span> <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="o">.</span><span class="n">run_with</span><span class="p">(</span><span class="n">references</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>If there are no color related attributes specified then we just generate a
message to set the power on or off as specified.</p>
<p>If we are turning the light on and have color options then we will first
ask the device what it’s current state is. Lights that are off will be set
to brightness 0 on the new color and on, and then the brightness will be
changed to match the end result.</p>
<p>For the color options we use <code class="docutils literal"><span class="pre">photons_colour.Parser</span></code> to create the
<code class="docutils literal"><span class="pre">SetWaveformOptional</span></code> message that is needed to change the device. This
means that we support an <code class="docutils literal"><span class="pre">effect</span></code> option for setting different waveforms.</p>
<p>If keep_brightness is True then we do not change the brightness of the device
despite any brightness options in the color options.</p>
</dd></dl>

</div>
<div class="section" id="module-photons_control.multizone">
<span id="multizone-helpers"></span><h2>Multizone Helpers<a class="headerlink" href="#module-photons_control.multizone" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="photons_control.multizone.zones_from_reference">
<em class="property">async for ... in </em><code class="descclassname">photons_control.multizone.</code><code class="descname">zones_from_reference</code><span class="sig-paren">(</span><em>target</em>, <em>reference</em>, <em>afr</em>, <em>gatherer=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.multizone.zones_from_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield (serial, [(zone, color), …]) for each multizone device that is found</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.multizone.find_multizone">
<em class="property">async for ... in </em><code class="descclassname">photons_control.multizone.</code><code class="descname">find_multizone</code><span class="sig-paren">(</span><em>target</em>, <em>reference</em>, <em>afr</em>, <em>gatherer=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.multizone.find_multizone" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield (serial, capability) for all multizone products found in this reference</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.multizone.SetZonesPlan">
<code class="descclassname">photons_control.multizone.</code><code class="descname">SetZonesPlan</code><span class="sig-paren">(</span><em>*args</em>, <em>refresh=&lt;class 'delfick_project.norms.spec_base.NotSpecified'&gt;</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.multizone.SetZonesPlan" title="Permalink to this definition">¶</a></dt>
<dd><p>Return messages used to apply a color range to multizone devices</p>
<p>Takes in:</p>
<dl class="docutils">
<dt>colors - [[color_specifier, length], …]</dt>
<dd>For example, [[“red”, 1], [“blue”, 3], [“hue:100 saturation:0.5”, 5]]</dd>
<dt>zone_index - default 0</dt>
<dd>An integer representing where on the strip to start the colors</dd>
<dt>duration - default 1</dt>
<dd>Application duration</dd>
<dt>overrides - default None</dt>
<dd>A dictionary containing hue, saturation, brightness and kelvin for
overriding colors with</dd>
</dl>
<p>For devices that aren’t a multizone, info will be Skip, otherwise it’ll be
appropriate messages respective to the device supporting extended multizone
or not.</p>
<p>Usage is:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">photons_control.planner</span> <span class="kn">import</span> <span class="n">Gatherer</span><span class="p">,</span> <span class="n">Skip</span>

<span class="n">gatherer</span> <span class="o">=</span> <span class="n">Gatherer</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
<span class="n">plans</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;set_zones&quot;</span><span class="p">:</span> <span class="n">SetZonesPlan</span><span class="p">(</span><span class="n">colors</span><span class="p">)}</span>

<span class="n">async</span> <span class="k">with</span> <span class="n">target</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">afr</span><span class="p">:</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">serial</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">messages</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">plans</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">afr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Skip</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span><span class="o">.</span><span class="n">run_with_all</span><span class="p">(</span><span class="n">serial</span><span class="p">,</span> <span class="n">afr</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this example code will do one strip at a time, if you want to
change all strips at the same time, just use the SetZones msg in a normal
run_with script.</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.multizone.SetZones">
<code class="descclassname">photons_control.multizone.</code><code class="descname">SetZones</code><span class="sig-paren">(</span><em>colors</em>, <em>gatherer=None</em>, <em>power_on=True</em>, <em>reference=None</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.multizone.SetZones" title="Permalink to this definition">¶</a></dt>
<dd><p>Set colors on all found multizone devices. Uses SetZonesPlan to generate the
messages to set the zones on the device and so keyword arguments to this
messages are passed directly to the plan.</p>
<p>Usage looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">SetZones</span><span class="p">([[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">]],</span> <span class="n">zone_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">await</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="o">.</span><span class="n">run_with_all</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
</pre></div>
</div>
<p>You may also pass in a Gatherer instance to SetZones if you already have
one of those.</p>
<p>By default the devices will be powered on. If you don’t want this to happen
then pass in power_on=False</p>
<p>If you want to target a particular device or devices, pass in reference as a
run_with reference.</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.multizone.SetZonesEffect">
<code class="descclassname">photons_control.multizone.</code><code class="descname">SetZonesEffect</code><span class="sig-paren">(</span><em>effect</em>, <em>gatherer=None</em>, <em>power_on=True</em>, <em>power_on_duration=1</em>, <em>reference=None</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.multizone.SetZonesEffect" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an effect on your strips</p>
<p>Where effect is one of the available effect types:</p>
<dl class="docutils">
<dt>OFF</dt>
<dd>Turn the animation off</dd>
<dt>MOVE</dt>
<dd>A moving animation</dd>
</dl>
<p>Options include:
- offset
- speed
- duration</p>
<p>Usage looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">SetZonesEffect</span><span class="p">(</span><span class="s2">&quot;MOVE&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">await</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="o">.</span><span class="n">run_with_all</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
</pre></div>
</div>
<p>By default the devices will be powered on. If you don’t want this to happen
then pass in power_on=False</p>
<p>If you want to target a particular device or devices, pass in reference as a
run_with reference.</p>
</dd></dl>

</div>
<div class="section" id="module-photons_control.tile">
<span id="tile-helpers"></span><h2>Tile Helpers<a class="headerlink" href="#module-photons_control.tile" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="photons_control.tile.tiles_from">
<code class="descclassname">photons_control.tile.</code><code class="descname">tiles_from</code><span class="sig-paren">(</span><em>state_pkt</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.tile.tiles_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a Tile State packet, return the tile devices that are valid.</p>
<p>This works by taking into account <code class="docutils literal"><span class="pre">tile_devices_count</span></code> and <code class="docutils literal"><span class="pre">start_index</span></code>
on the packet.</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.tile.orientations_from">
<code class="descclassname">photons_control.tile.</code><code class="descname">orientations_from</code><span class="sig-paren">(</span><em>pkt</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.tile.orientations_from" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="photons_control.tile.SetTileEffect">
<code class="descclassname">photons_control.tile.</code><code class="descname">SetTileEffect</code><span class="sig-paren">(</span><em>effect</em>, <em>gatherer=None</em>, <em>power_on=True</em>, <em>power_on_duration=1</em>, <em>reference=None</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.tile.SetTileEffect" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an effect on your tiles</p>
<p>Where effect is one of the available effect types:</p>
<dl class="docutils">
<dt>OFF</dt>
<dd>Turn the animation off</dd>
<dt>FLAME</dt>
<dd>A flame effect</dd>
<dt>MORPH</dt>
<dd>A Morph effect</dd>
</dl>
<p>Options include:
- speed
- duration
- palette</p>
<p>Usage looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">SetTileEffect</span><span class="p">(</span><span class="s2">&quot;MORPH&quot;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">])</span>
<span class="n">await</span> <span class="n">target</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="o">.</span><span class="n">run_with_all</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
</pre></div>
</div>
<p>By default the devices will be powered on. If you don’t want this to happen
then pass in power_on=False</p>
<p>If you want to target a particular device or devices, pass in reference as a
run_with reference.</p>
</dd></dl>

<span class="target" id="module-photons_control.orientation"></span><dl class="class">
<dt id="photons_control.orientation.Orientation">
<em class="property">class </em><code class="descclassname">photons_control.orientation.</code><code class="descname">Orientation</code><a class="headerlink" href="#photons_control.orientation.Orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>The different available orientations</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.orientation.nearest_orientation">
<code class="descclassname">photons_control.orientation.</code><code class="descname">nearest_orientation</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.orientation.nearest_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine which orientation maps to the provided x, y, z</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.orientation.reorient">
<code class="descclassname">photons_control.orientation.</code><code class="descname">reorient</code><span class="sig-paren">(</span><em>colors</em>, <em>orientation</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.orientation.reorient" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the colors in the different order given our orientation</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.orientation.reverse_orientation">
<code class="descclassname">photons_control.orientation.</code><code class="descname">reverse_orientation</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.orientation.reverse_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the reverse orientation</p>
<p>Useful for mapping current colours into RightSideUp</p>
</dd></dl>

<dl class="function">
<dt id="photons_control.orientation.rotated_index">
<code class="descclassname">photons_control.orientation.</code><code class="descname">rotated_index</code><span class="sig-paren">(</span><em>i</em>, <em>orientation</em><span class="sig-paren">)</span><a class="headerlink" href="#photons_control.orientation.rotated_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Give new index for i given our orientation</p>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="photons_core.html" class="btn btn-neutral float-right" title="photons_core" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="photons_colour.html" class="btn btn-neutral" title="photons_colour" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Stephen Moore.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>